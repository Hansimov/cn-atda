# 1.2 网络边缘

在上一节中，我们给出了因特网和网络协议的总体概述。现在我们将更深入一些来探究计算机网络（特别是因特网）的部件。在本节中，我们从网络边缘开始，观察一下我们更为熟悉的部件，即计算机、智能手机和我们日常使用的其他设备。在接下来的一节中，我们将从网络边缘向网络核心推进，查看计算机网络中的交换和选路。

{% hint style="info" %}
### 历史事件 - 令人眼花缭乱的因特网端系统

不久以前，与因特网相连的端系统设备主要还是传统的计算机，如桌面机和强大的服务器。从 20 世纪 90 年代后期开始并持续到今天，各种各样有趣的设备开始与因特网相连。这些设备都具有发送和接收数字数据的共同特性。考虑到因特网的无所不在，以及定义良好（标准）的协议和适用因特网的商品硬件的可用性，使用因特网技术将这些设备连接在一起并同与因特网连接的服务器相连是自然而然的事。

许多设备是在家庭中使用的，其中有视频游戏机（如微软公司的 Xbox）、因特网电视、能够下载并显示数字照片的数字相框、洗衣机、电冰箱，甚至下载气象信息并将白天天气预报（例如多云天气）的图像烙在早餐面包片上的烤面包机【BBC 2001】。具有 GPS 功能的 IP 电话能将位置相关的服务（地图、邻近的服务或人的信息）放在指尖。嵌入物理环境中的联网传感器允许监视建筑物、桥梁、地震活动、野生动植物习性、河流江口和天气。生物医学设备能够嵌入和联网在身体域网络中。如此多的不同设备能用网络连接在一起，因特网确实变成了一个“物联网”【ITU 2005b】。
{% endhint %}

回想前一节中计算机网络的术语，通常把与因特网相连的计算机和其他设备称为端系统。如图 1-3 所示，因为它们位于因特网的边缘，故而被称为端系统。因特网的端系统包括了桌面计算机（例如，桌面 PC、Mac 和 Linux 盒）、服务器（例如，Web 和电子邮件服务器）和移动计算机（例如，便携机、智能手机和平板电脑）。此外，越来越多的非传统设备正被作为端系统与因特网相连（参见“插入材料”）。

端系统也称为**主机**，因为它们容纳（即运行）应用程序，如 Web 浏览器程序、Web 服务器程序、电子邮件阅读程序或电子邮件服务器程序等。本书通篇将交替使用主机和端系统这两个术语，即**主机 = 端系统**。主机有时又被进一步划分为两类：**客户**（client）和**服务器**（server）。客户非正式地等同于桌面 PC、移动 PC 和智能手机等，而服务器非正式地等同于更为强大的机器，用于存储和发布 Web 页面、流视频、中继电子邮件等。今天，大部分提供搜索结果、电子邮件、Web 页面和视频的服务器都属于大型**数据中心**（data center）。例如，谷歌公司（Google）拥有 30-50 个数据中心，其中许多数据中心都有 10 万台以上的服务器。

## 1.2.1 接入网

考虑了位于 “网络边缘” 的应用程序和端系统后，我们接下来再考虑**接入网**（access network），这是指将端系统连接到其**边缘路由器**（edge router）的物理链路。边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。图 1-4 用粗的、带阴影的线显示了几种类型的接入链路和使用接入网的几种环境（家庭、公司和广域移动无线）。



### 1. 家庭接入：DSL、电缆、FTTH，拨号和卫星

在今天的发展中国家中，实现因特网接入的家庭超过 65%，名列前茅的韩国、荷兰、芬兰和瑞典实现因特网接入的家庭则超过 80%，几乎所有家庭都是经过高速宽带连接 \[ITU2011\]。芬兰和瑞典近期宣称高速因特网接入是一种 “法定权力”。考虑到家庭对网络接入的强烈兴趣，我们从家庭与因特网的连接开始介绍接入网概况。

今天，宽带住宅接入有两种最流行的类型：**数字用户线**（Digital Subscriber Line，DSL）和电缆。住户通常从提供本地电话接入的本地电话公司处获得 DSL 因特网接入。因此，当使用 DSL 时，用户的本地电话公司也是它的 ISP。如图 1-5 所示，每个用户的 DSL 调制解调器使用现有的电话线（双绞铜线，将在 1.2.2 节中讨论）与位于本地电话公司的本地中心局（CO）中的数字用户线接入复用器（DSLAM）来交换数据。家庭的 DSL 调制解调器得到数字数据后将其转换为高频音，以通过电话线传输给本地中心局；来自许多家庭的模拟信号在 DSLAM 处被转换回数字形式。

家庭电话线同时承载了数据和传统的电话信号，它们编码为不同的频率：

* 高速下行信道，位于 50kHz 到 1MHz 频段；
* 中速上行信道，位于 4kHz 到 50kHz 频段；
* 普通的双向电话信道，位于 0 到 4kHz 频段。

这种方法使单根 DSL 线路看起来就像有 3 根单独的线路，因此一个电话呼叫和一个因特网连接能够同时共享 DSL 链路。（1.3.1 节将描述这种频分复用技术。）在用户一侧，一个分频器把到达家庭的数据信号和电话信号分隔开来，并将数据信号转发给 DSL 调制解调器。在本地电话公司一侧，在本地中心局中，DSLAM 把数据和电话信号分隔开，并将数据送往因特网中。数百甚至上千个家庭与同一个 DSLAM 相连【Dischinger 2007】。

DSL 标准定义了 12 Mbps 下行和 1.8 Mbps 上行传输速率【ITU 1999】，以及 24 Mbps 下行和 2.5 Mbps 上行传输速率【ITU 2003】。因为这些上行速率和下行速率是不同的，所以这种接人被称为不对称的。实际取得的下行和上行传输速率也许小于上述速率，因为当 DSL 提供商提供分等级的服务（以不同的价格使用不同的速率）时，他们也许有意地限制住宅速率，或者因为家庭与本地中心局之间的距离、双绞线的规格和电气干扰的程度而限制最大的速率。工程师特意为家庭与本地中心局之间的短距离接入设计了 DSL；一般而言，如果住宅不是位于本地中心局的 5~10 英里范围内，该住宅必须求助于其他形式的因特网接入。

当 DSL 利用本地电话公司现有的本地电话基础设施时，**电缆因特网接入**（cable Internet access）利用了有线电视公司现有的有线电视基础设施。住宅从提供有线电视的公司获得了电缆因特网接入。如图 1-6 所示，光缆将电缆头端连接到地区枢纽，从这里使用传统的同轴电缆到达各家各户和公寓。每个地区枢纽通常支持 500-5000 个家庭。因为在这个系统中应用了光纤和同轴电缆，所以它经常被称**为混合光纤同轴**（Hybrid Fiber Coax，HFC）。

电缆因特网接入需要特殊的调制解调器，称为电缆调制解调器（cable modem）。如同 DSL 调制解调器，电缆调制解调器通常是一个外部设备，通过一个以太网端口连接到家庭 PC。（我们将在第 5 章非常详细地讨论以太网。）在电缆头端，电缆调制解调器端接系统（Cable Modem Termination System，CMTS）起到如同 DSL 网络的 DSLAM 类似的功能，即将来自许多下行家庭中的电缆调制解调器发送的模拟信号转换回数字形式。电缆调制解调器将 HFC 网络划分为下行和上行两个信道。如同 DSL，接入通常是不对称的，下行信道通常分配了比上行信道更高的传输速率。DOCSIS 2.0 标准定义了高达 42.8 Mbps 的下行速率和高达 30.7 Mbps 的上行速率。如在 DSL 网络那样，由于较低的合同数据率或媒体损伤，最大可取得的速率可能不一定能达到。

电缆因特网接入的一个重要特征是共享广播媒体。特别是由头端发送的每个分组向下行经每段链路到每个家庭；每个家庭发送的每个分组经上行信道向头端传输。因此，如果几个用户同时经下行信道下载一个视频文件，每个用户接收视频文件的实际速率将大大低于电缆总计的下行速率。而另一方面，如果仅有很少的活跃用户在进行 Web 冲浪，则每个用户都可以以下行速率的全部速率接收 Web 网页，因为用户们将很少在完全相同的时刻请求网页。因为上行信道也是共享的，需要一个分布式多路访问协议来协调传输和避免碰撞。（我们将在第 5 章中更为详细地讨论碰撞问题。）

尽管 DSL 和电缆网络当前代表了超过 90% 的美国住宅宽带接入，但出现了一种承诺更高速率的新兴技术，即**光纤到户**（Fiber To The Home，FTTH）【FTTH Counci 201la】。顾名思义，FTTH 概念简单，从本地中心局直接到家庭提供了一条光纤路径。在美国，Verizon 因提供 FIOS 服务在 FTTH 方面特别有竞争力【Verizon FIOS 2012】。

从本地中心局到家庭有几种竞争性的光纤分布方案。最简单的光纤分布网络称为直接光纤，从本地中心局到每户设置一根光纤。更为一般的是，从中心局出来的每根光纤实际上由许多家庭共享，直到相对接近这些家庭的位置，该光纤才分成每户一根光纤。进行这种划分的有两种竞争性的光纤分布体系结构：主动光纤网络（Active Optical Network，AON）和被动光纤网络（Passive Optical Network，PON）。AON 基本上就是交换因特网，将在第 5 章进行讨论。

这里，简要讨论一下 PON，该技术用于 Verizon 的 FIOS 服务中。图 1-7 显示了使用 PON 分布体系结构的 FTFHO 每个家庭具有一个光纤网络端接器（Optical Network Terminator，ONT），它由专门的光纤连接到邻近的分配器（splitter）。该分配器把一些家庭（通常少于 100 个）集结到一根共享的光纤，该光纤再连接到本地电话和公司的中心局中的光纤线路端接器（Optical Line Terminator，OLT）。该 OLT 提供了光信号和电信号之间的转换，经过本地电话公司路由器与因特网相连。在家庭中，用户将一台家庭路由器（通常是无线路由器）与 ONT 相连，并经过这台家庭路由器接入因特网。在 PON 体系结构中，所有从 OLT 发送到分配器的分组在分配器（类似于一个电缆头端）处复制。

FTTH 有潜力提供每秒千兆比特范围的因特网接入速率。然而，大多数 FITH ISP 提供不同速率选择，较高的速率自然花费更多。美国 FTTH 用户在 2011 年的平均下行速率大约为 20 Mbps（与 13Mbps 电缆接入网相当，而小于 5MbpsDSL）【FTTH Council 2011b】。

还可釆用另外两种接入网技术为家庭提供因特网接入。在无法提供 DSL、电缆和 FTTH 的地方（例如在某些乡村环境），能够使用卫星链路将住宅以超过 1Mbps 的速率与因特网相连。StarBand 和 HughesNet 是两家这样的卫星接入提供商。使用传统电话线的拨号接入与 DSL 基于相同的模式：家庭的一只调制解调器经过电话线连接到 ISP 中的一只调制解调器。与 DSL 和其他宽带接入网相比，拨号接入 56kbps 的慢速率是令人痛苦的。

### 2. 企业（和家庭）接入：以太网和 WiFi

在公司和大学校园以及在越来越多的家庭环境中，通常是用局域网（LAN）将端用户连接到边缘路由器。尽管有许多不同类型的局域网技术，但是以太网到目前为止是当前公司、大学和家庭网络中最为流行的接入技术。如图 1-8 中所示，以太网用户使用双绞铜线与一台以太网交换机相连，第 5 章中将详细讨论该技术。以太网交换机或这样相连的交换机网络，则再与更大的因特网相连。使用以太网接入，用户通常以 100Mbps 速率接入以太网交换机，而服务器可能具有 1Gbps 甚至 lOGbps 的接入速率。

然而，越来越多的人从便携机、智能手机、平板电脑和其他设备无线接入因特网（参见前面的插入内容“令人眼花缭乱的因特网端系统”）。在无线 LAN 环境中，无线用户从/到一个接入点发送/接收分组，该接入点与企业网连接（很可能包括有线以太网），该企业网再与有线因特网相连。一个无线 LAN 用户通常必须位于接入点的几十米范围内。基于 IEEE 802.11 技术的无线 LAN 接入，更为通俗地称为 WiFi，目前几乎无所不在，如大学、商业办公室、咖啡厅、机场、家庭，甚至在飞机上。在许多城市，人们能够站在街角而位于 10 或 20 个基站范围内（对于可浏览的 802.11 基站全局图——这些基站由那些非常热心做这种事情的人发现并记载在 Web 站点上，参见【wigle.net 2012】）。如在第 6 章详细讨论的那样，802.11 今天提供了高达 54Mbps 的共享传输速率。

即使以太网和 WiFi 接入网最初是设置在企业（公司或大学）环境中的，但它们近来也已经成为家庭网络中相对常见的部件。今天许多家庭正在将宽带住宅接入（即电缆调制解调器或 DSL）与廉价的无线局域网技术结合起来，以产生强大的家用网络【Edwards 2011】。图 1-9 显示了典型的家庭网络。这个家庭网络组成如下：一台漫游的便携机和 1 台有线 PC；一个与无线 PC 通信的基站（无线接入点）；一个提供与因特网宽带接入的电缆调制解调器；以及一台互联了基站及带有电缆调制解调器的固定 PC 的路由器。该网络允许家庭成员经宽带接入因特网，其中一个成员可以在厨房、院子或卧室漫游上网。

### 3. 广域无线接入：3G 和 LTE

iPhone、黑莓和安卓等设备越来越多地用来在移动中发送邮件、Web 冲浪、推特和下载音乐。这些设备应用了与移动电话相同的基础设施，通过蜂窝网提供商运营的基站来发送接收分组。与 WiFi 不同的是，一个用户仅需要位于基站的数万米（而不是几十米）范围内。

电信公司已经在所谓第三代（3G）无线技术中进行了大量投资，3G 为分组交换广域无线因特网接入提供了超过 1Mbps 的速率。甚至更高速率的广域接入技术及第四代（4G）广域无线网络已经在部署中。LTE（“Long-Term Evolution” 的缩写，被评为最差首字母縮写词年度奖候选者）来源于 3G 技术，它能够取得超过 10Mbps 的速率。几十 Mbps 的 LTE 下行速率已经在商业部署中得到应用。我们将在第 6 章中涉及无线网络和移动性以及 WiFi、3G 和 LTE 等技术的基本原则。

## 1.2.2 物理媒体

在前面的内容中，我们概述了因特网中的某些最为重要的网络接入技术。当我们描述这些技术时，我们也指出了所使用的物理媒体。例如，我们说过 HFC 使用了光缆和同轴电缆相结合的技术。我们说过 DSL 和以太网使用了双绞铜线。我们说过移动接入网使用了无线电频谱。在这一节中，我们简要概述一下这些和其他常在因特网中使用的传输媒体。

为了定义物理媒体所表示的内容，我们仔细思考一下一个比特的短暂历程。考虑一个比特从一个端系统开始传输，通过一系列链路和路由器，到达另一个端系统。这个比特被传输许许多多次！源端系统首先传输这个比特，不久后其中的第一台路由器接收该比特；第一台路由器传输该比特，接着不久后第二台路由器接收该比特；等等。因此，这个比特当从源到目的地传输肘，通过一系列 “传输器 - 接收器” 对。对于每个传输器 - 接收器对，通过跨越一种物理媒体（physicalmedimn）传播电磁波或光脉冲来发送该比特。该物理媒体可具有多种形状和形式，并且对沿途的每个传输器 - 接收器对而言不必具有相同的类型。物理媒体的例子包括双绞铜线、同轴电缆、. 多模光纤缆、陆地无线电频谱和卫星无线电频谱。物理媒体划分为两类：**导引型媒体**（guided media）和**非导引型媒体**（unguided media）。对于导引型媒体，电波沿着固体媒体前行，如光缆、双绞铜线或同轴电缆。对于非导引型媒体，电波在空气或外层空间中传播，例如在无线局域网或数字卫星频道中。

在深入讨论各种媒体类型的牛鳄之更丄我们简要地讨论一下它们的成本。物理链路（铜线、光缆等）的实际成本与其他网络成本相比通常是相当小的。特别是安装物理链路的劳动力成本能够比材料成本高几个数量级。正因为这个原因，许多建筑商在一个建筑物中的每个房间中安装了双绞线、光缆和同轴电缆。即使最初仅使用了一种媒体，在不远的将来也可能会使用另一种媒体，这样将来不必再铺设另外的线缆，从而节省了经费。

### 1. 双绞铜线

最便宜并且使用最为普遍的引导型传输媒体是双绞铜线。一百多年来，它一直用于电话网。事实上，从电话机到本地电话交换机超过 99% 的连线使用的是双绞铜线。我们多数人在自己的家庭和工作环境中已经看到过双绞线。双绞线由两根隔离的铜线组成，每根大约 1mm 粗，以规则的螺旋形式排列着。这两根线被绞合起来，以减少来自邻近类似的双绞线的电气干扰。通常许多双绞线捆扎在一起形成一根电缆：并在这些双绞线外面覆盖上保护性防护层。一对电线构成了一个通信链路。**无屏蔽双绞线**（Unshielded Twisted Pair，UTP）常用在建筑物内的计算机网络中，即用于局域网（LAN）中。目前局域网中的双绞线的数据速率从 10 Mbps 到 10 Gbps。所能达到的数据传输速率取决于线的粗细以及传输方和接收方之间的距离。

20 世纪 80 年代出现光纤技术时，许多人因为双絞线比特速率低而轻视它，某些人甚至认为光纤技术将完全代替双绞线。但双绞线不是那么容易被抛弃的。现代的双绞线技术例如 6a 类电缆能够达到 lOGbps 的数据传输速率，距离长达 100m。双绞线最终已经作为高速 LAN 联网的主要方式。

如前面讨论的那样，双绞线也经常用于住宅因特网接入。我们看到，拨号调制解调器技术通过双绞线能以高达 56kbps 的速率接入。我们也看到，数字用户线（DSL）技术通过双绞线使住宅用户以超过数十 Mbps 的速率接入因特网（当用户靠近 ISP 的调制解调器居住时）。

### 2. 同轴电缆

与双绞线类似，同轴电缆由两个铜导体组成，但是这两个导体是同心的而不是并行的。借助于这种结构及特殊的绝缘体和保护层，同轴电缆能够达到较高的数据传输速率。同轴电缆在电缆电视系统中相当普遍。我们前面已经看到，电缆电视系统最近与电缆调制解调器结合起来，为住宅区用户提供数十 Mbps 速率的因特网接入。在电缆电视和电缆因特网接入中，发送设备将数字信号调制到某个特定的频段，产生的模拟信号从发送设备传送到一个或多个接收方。同轴电缆能被用作导引型共享媒体（shared medium）。特别是，许多端系统能够直接与该电缆相连，每个端系统都能接收由其他端系统发送的东西。

### 3. 光纤

光纤是一种细而柔软的、能够导引光脉冲的媒体，每个脉冲表示一个比特。\| 一根光纤能够支持极高的比特速率，高达数十甚至数百 Gbps。它们不受电磁干扰，长达 100km 的光缆信号衰减极低，并且很难窃听。签些特征使得光纤成为长途引导型传输媒体，特别是跨海链路。在美国和别的地方，许多长途电话网络现在全面使用光纤。光纤也广泛用于因特网的主干。然而，高成本的光设备，如发射器、接收器和交换机，阻碍光纤在短途传输中的应用，如在 LAN 或家庭接入网中就不使用它们。光载波（OpticalCarrier，0C）标准链路速率的范围从 51.8Mbps 到 39.8Gbps；这些标准常被称为 0C-n，其中的链路速率等 n × 51.8 Mbps。目前正在使用的标准包括 OC-1、OC-3、OC-12、OC-24、OC-48、OC-96、OC-192、OC-768。【Mukherjee 2006，Ramaswamy 2010】提供了光纤网络各方面的知识。

### 4. 陆地无线电信道

无线电信道承载电磁频谱中的信号。它不需要安装物理线路，并具有穿透墙壁、提供与移动用户的连接以及长距离承载信号的能力，因而成为一种有吸引力的媒体。无线电信道的特性极大地依赖于传播环境和传输信号的距离。环境上的考虑取决于路径损耗和遮挡衰落（即当信号跨距离传播和绕过 / 通过阻碍物体时信号降低强度）、多径衰落（由于干扰对象的信号反射）以及干扰（由于其他无线电信道或电磁信号）。

陆地无线电信道能够大致划分为三类：一 类运行在很短距离（如 1 米或 2 米）；另一类运行在局域，通常跨越数十到几百米；第三类运行在广域，跨越数万米。个人设备如无线头戴式耳机、键盘和医疗设备跨短距离运行；在 1-2.1 节中描述的无线 LAN 技术使用了局域无线电信道；蜂窝接入技术使用了广域无线电信道。我们将在第 6 章中详细讨论无线电信道。

### 5. 卫星无线电信道

一颗通信卫星连接两个或多个位于地球的微波发射方/接收方，它们被称为地面站。该卫星在一个频段上接收传输，使用一个转发器（下面讨论）再生信号，并在另一个频率上传输信号。通信中常使用两类卫星：同步卫星（geostationary satellite）和近地轨道（Low-Earth Orbiting，LEO）卫星。

同步卫星永久地停留在地球上方的相同点上。这种静止存在是通过将卫星放置在地球表面上方 36000km 的轨道上而取得的。从地面站到卫星再回到地面站的巨大距离引入了 280ms 的可观的信号传播时延。不过，能以数百 Mbps 速率运行的卫星链路，经常用在那些无法使用 DSL 或电缆因特网接入的区域。

近地轨道卫星放置得非常靠近地球，并且不是永久地停留在地球上方的一个点。它们围绕地球旋转，就像月亮围绕地球旋转那样。为了提供对一个区域的连续覆盖，需要在轨道上放置许多卫星。当前有许多低轨道通信系统在研制中。Lloyd 的卫星星座 Web 页【Wood 2012】提供和收集了关于通信用卫星星座系统的信息。近地轨道卫星技术未来也许能够用于因特网接入。



